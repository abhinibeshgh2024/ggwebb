<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebbJamm | Pro Tic-Tac-Toe</title>
    <style>
        :root {
            --primary: #38bdf8;
            --secondary: #c084fc;
            --bg: #0b0f1a;
            --card: rgba(255, 255, 255, 0.03);
            --border: rgba(255, 255, 255, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }

        body {
            min-height: 100vh;
            background: radial-gradient(circle at top right, #1e293b, #0b0f1a);
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        /* Header Style */
        .game-header { text-align: center; margin-bottom: 30px; }
        .logo-small { width: 120px; margin-bottom: 10px; filter: drop-shadow(0 0 10px var(--primary)); }

        /* Setup Box */
        .setup-container {
            background: var(--card);
            border: 1px solid var(--border);
            padding: 25px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            width: 100%;
            max-width: 500px;
            margin-bottom: 20px;
            text-align: center;
        }

        .setup-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px; }

        label { display: block; margin-bottom: 8px; font-size: 13px; color: #94a3b8; text-transform: uppercase; }

        select, button {
            width: 100%;
            padding: 12px;
            border-radius: 10px;
            background: #1e293b;
            border: 1px solid var(--border);
            color: #fff;
            cursor: pointer;
            font-weight: 600;
        }

        .toss-btn {
            background: var(--primary);
            color: #000;
            margin-top: 15px;
            border: none;
            transition: 0.3s;
        }

        .toss-btn:disabled { background: #334155; color: #64748b; cursor: not-allowed; }

        /* Game Board */
        #game-board {
            display: grid;
            gap: 10px;
            margin: 20px 0;
            background: rgba(0,0,0,0.2);
            padding: 10px;
            border-radius: 15px;
            display: none; /* Initially hidden */
        }

        .cell {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 10px;
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(20px, 5vw, 40px);
            font-weight: 900;
            cursor: pointer;
            transition: 0.2s;
        }

        .cell:hover { background: rgba(56, 189, 248, 0.1); }
        .cell.x { color: var(--primary); text-shadow: 0 0 15px var(--primary); }
        .cell.o { color: var(--secondary); text-shadow: 0 0 15px var(--secondary); }

        .status-msg { margin: 15px 0; font-size: 18px; color: var(--primary); font-weight: bold; height: 27px; }

        .back-link { margin-top: 20px; color: #94a3b8; text-decoration: none; font-size: 14px; }
        .back-link:hover { color: var(--primary); }
    </style>
</head>
<body>

    <div class="game-header">
        <img src="N-removebg-preview.png" alt="Logo" class="logo-small">
        <h2 style="letter-spacing: 3px;">PRO TIC-TAC-TOE</h2>
    </div>

    <div class="setup-container" id="setup">
        <div class="setup-grid">
            <div>
                <label>Select Grid</label>
                <select id="grid-size">
                    <option value="3">3 x 3 (Classic)</option>
                    <option value="4">4 x 4 (Pro)</option>
                    <option value="5">5 x 5 (Elite)</option>
                    <option value="6">6 x 6 (God Mode)</option>
                </select>
            </div>
            <div>
                <label>Your Sign</label>
                <select id="player-sign">
                    <option value="X">Player X</option>
                    <option value="O">Player O</option>
                </select>
            </div>
        </div>
        <button class="toss-btn" onclick="startToss()">START TOSS</button>
    </div>

    <div class="status-msg" id="status">Configure game to start</div>

    <div id="game-board"></div>

    <button id="reset-btn" onclick="location.reload()" style="max-width: 200px; display: none; background: transparent; border: 1px solid var(--primary); color: var(--primary);">RESET GAME</button>

    <a href="index.html" class="back-link">‚Üê Back to WebbJamm</a>

    <script>
        let board = [];
        let size = 3;
        let currentPlayer = "";
        let gameActive = false;

        function startToss() {
            const status = document.getElementById('status');
            const tossBtn = document.querySelector('.toss-btn');
            tossBtn.disabled = true;
            status.innerText = "Tossing coin...";

            setTimeout(() => {
                const signs = ["X", "O"];
                currentPlayer = signs[Math.floor(Math.random() * signs.length)];
                status.innerText = `Toss Won by: ${currentPlayer} !`;
                
                setTimeout(initGame, 1000);
            }, 1500);
        }

        function initGame() {
            size = parseInt(document.getElementById('grid-size').value);
            const boardElement = document.getElementById('game-board');
            const setupBox = document.getElementById('setup');
            const status = document.getElementById('status');

            board = Array(size * size).fill("");
            boardElement.style.display = "grid";
            boardElement.style.gridTemplateColumns = `repeat(${size}, 1fr)`;
            boardElement.style.width = size === 3 ? "320px" : (size * 70) + "px";
            boardElement.innerHTML = "";

            for (let i = 0; i < size * size; i++) {
                const cell = document.createElement('div');
                cell.classList.add('cell');
                cell.setAttribute('data-index', i);
                cell.addEventListener('click', () => handleMove(i));
                boardElement.appendChild(cell);
            }

            setupBox.style.display = "none";
            document.getElementById('reset-btn').style.display = "block";
            status.innerText = `Turn: Player ${currentPlayer}`;
            gameActive = true;
        }

        function handleMove(index) {
            if (board[index] !== "" || !gameActive) return;

            board[index] = currentPlayer;
            const cell = document.querySelectorAll('.cell')[index];
            cell.innerText = currentPlayer;
            cell.classList.add(currentPlayer.toLowerCase());

            if (checkWin()) {
                document.getElementById('status').innerText = `üèÜ PLAYER ${currentPlayer} WINS!`;
                gameActive = false;
                return;
            }

            if (!board.includes("")) {
                document.getElementById('status').innerText = "ü§ù IT'S A DRAW!";
                gameActive = false;
                return;
            }

            currentPlayer = currentPlayer === "X" ? "O" : "X";
            document.getElementById('status').innerText = `Turn: Player ${currentPlayer}`;
        }

        function checkWin() {
            // Horizontal & Vertical
            for (let i = 0; i < size; i++) {
                let rowWin = true;
                let colWin = true;
                for (let j = 0; j < size; j++) {
                    if (board[i * size + j] !== currentPlayer) rowWin = false;
                    if (board[j * size + i] !== currentPlayer) colWin = false;
                }
                if (rowWin || colWin) return true;
            }

            // Diagonals
            let diag1 = true, diag2 = true;
            for (let i = 0; i < size; i++) {
                if (board[i * size + i] !== currentPlayer) diag1 = false;
                if (board[i * size + (size - 1 - i)] !== currentPlayer) diag2 = false;
            }
            return diag1 || diag2;
        }
    </script>
</body>
</html>
